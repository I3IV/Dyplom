{"ast":null,"code":"import _classCallCheck from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\src\\\\node_modules\\\\components-vitalii\\\\pages\\\\restaurant-page\\\\restaurant-page.js\";\nimport React, { Component, Fragment } from \"react\";\nimport \"./restaurant-page.css\";\nimport { withRouter } from \"react-router-dom\";\nimport Spinner from \"components/spinner\";\nimport DishCategories from \"./dish-categories\";\nimport RestaurantView from \"./restaurant-view\";\nimport Header from \"shared-components/header\";\nimport { getRestaurant, getDishesByRestId, getDishCategoriesByRestId } from \"api\";\n\nvar RestaurantPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RestaurantPage, _Component);\n\n  function RestaurantPage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, RestaurantPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(RestaurantPage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      openDish: false,\n      dishToShow: {}\n    };\n\n    _this.onDishAddClick = function (dish) {\n      _this.setState({\n        dishToShow: dish\n      });\n\n      _this.setState({\n        openDish: true\n      });\n    };\n\n    _this.handleDishClose = function () {\n      _this.setState({\n        openDish: false\n      });\n    };\n\n    _this.filterDishes = function (dishes, category_id) {\n      if (!category_id || category_id === 0) return dishes;\n      return dishes.filter(function (dish) {\n        return dish.Category_id === category_id;\n      });\n    };\n\n    _this.handleMenu = function (category_id) {\n      _this.setState({\n        category_id: category_id\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(RestaurantPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var restId = this.props.match.params.id;\n      getRestaurant(restId).then(function (restaurant) {\n        _this2.setState({\n          restaurant: restaurant\n        });\n      });\n      Promise.all([getDishCategoriesByRestId(restId), getDishesByRestId(restId)]).then(function (res) {\n        _this2.setState({\n          categories: res[0],\n          dishes: res[1],\n          category_id: \"\"\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          restaurant = _this$state.restaurant,\n          openDish = _this$state.openDish,\n          dishToShow = _this$state.dishToShow,\n          dishes = _this$state.dishes,\n          categories = _this$state.categories,\n          category_id = _this$state.category_id;\n      var dishesToShow = this.filterDishes(dishes, category_id);\n      var MenuView = dishesToShow ? React.createElement(DishCategories, {\n        categories: categories,\n        dishes: dishesToShow,\n        onDishAddClick: this.onDishAddClick,\n        handleMenu: this.handleMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }) : React.createElement(Spinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      });\n      var content = restaurant ? React.createElement(RestaurantView, {\n        data: {\n          restaurant: restaurant,\n          openDish: openDish,\n          dishToShow: dishToShow,\n          MenuView: MenuView,\n          handleDishClose: this.handleDishClose,\n          onDishAddClick: this.onDishAddClick\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }) : React.createElement(Spinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      });\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(Header, {\n        user: this.props.user,\n        handleClose: this.props.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }), content);\n    }\n  }]);\n\n  return RestaurantPage;\n}(Component);\n\nexport default withRouter(RestaurantPage);","map":{"version":3,"sources":["D:\\Studia\\React\\I3IV\\Dyplom\\src\\node_modules\\components-vitalii\\pages\\restaurant-page\\restaurant-page.js"],"names":["React","Component","Fragment","withRouter","Spinner","DishCategories","RestaurantView","Header","getRestaurant","getDishesByRestId","getDishCategoriesByRestId","RestaurantPage","state","openDish","dishToShow","onDishAddClick","dish","setState","handleDishClose","filterDishes","dishes","category_id","filter","Category_id","handleMenu","restId","props","match","params","id","then","restaurant","Promise","all","res","categories","dishesToShow","MenuView","content","user","handleClose"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport \"./restaurant-page.css\";\nimport { withRouter } from \"react-router-dom\";\nimport Spinner from \"components/spinner\";\nimport DishCategories from \"./dish-categories\";\nimport RestaurantView from \"./restaurant-view\";\nimport Header from \"shared-components/header\";\nimport {\n  getRestaurant,\n  getDishesByRestId,\n  getDishCategoriesByRestId\n} from \"api\";\n\nclass RestaurantPage extends Component {\n  state = {\n    openDish: false,\n    dishToShow: {}\n  };\n  componentDidMount() {\n    const restId = this.props.match.params.id;\n    getRestaurant(restId).then(restaurant => {\n      this.setState({ restaurant });\n    });\n    Promise.all([\n      getDishCategoriesByRestId(restId),\n      getDishesByRestId(restId)\n    ]).then(res => {\n      this.setState({\n        categories: res[0],\n        dishes: res[1],\n        category_id: \"\"\n      });\n    });\n  }\n  onDishAddClick = dish => {\n    this.setState({ dishToShow: dish });\n    this.setState({ openDish: true });\n  };\n  handleDishClose = () => {\n    this.setState({ openDish: false });\n  };\n  filterDishes = (dishes, category_id) => {\n    if (!category_id || category_id === 0) return dishes;\n    return dishes.filter(dish => dish.Category_id === category_id);\n  };\n  handleMenu = category_id => {\n    this.setState({ category_id });\n  };\n\n  render() {\n    const {\n      restaurant,\n      openDish,\n      dishToShow,\n      dishes,\n      categories,\n      category_id\n    } = this.state;\n\n    const dishesToShow = this.filterDishes(dishes, category_id);\n\n    const MenuView = dishesToShow ? (\n      <DishCategories\n        categories={categories}\n        dishes={dishesToShow}\n        onDishAddClick={this.onDishAddClick}\n        handleMenu={this.handleMenu}\n      />\n    ) : (\n      <Spinner />\n    );\n    const content = restaurant ? (\n      <RestaurantView\n        data={{\n          restaurant,\n          openDish,\n          dishToShow,\n          MenuView,\n          handleDishClose: this.handleDishClose,\n          onDishAddClick: this.onDishAddClick\n        }}\n      />\n    ) : (\n      <Spinner />\n    );\n\n    return (\n      <Fragment>\n        <Header user={this.props.user} handleClose={this.props.handleClose} />\n        {content}\n      </Fragment>\n    );\n  }\n}\nexport default withRouter(RestaurantPage);\n"]},"metadata":{},"sourceType":"module"}