import cities from './mock-cities';
import countries from './mock-countries';
import cuisines from './mock-cuisines';
import dishes from './mock-dishes';
import dishCategories from './mock-dish-categories';
import restaurants from './mock-restaurants';
import seats from './mock-seats';
import products from './mock-products';

const itemsSelect = items => {
  return items.map(item => ({
    value: item.label,
    label: item.label,
    })
  );
}

export {
  dishes,
  restaurants,
};

const getItemsByParentId = (item_id, arr) => {
  const propName = Object.keys(item_id)[0];
  const itemId = item_id[propName];

  return arr.filter((item) => {if(Array.isArray(item[propName]))
                                {
                                  return item[propName].includes(itemId)
                                }
                               else
                                  return item[propName] === itemId
                                })
            .map((item) => ({value: item.id,
                             label: item.name}))
}
const getItemNameById = (item_id, arr) => {
  const idx = arr.findIndex((item) => item.id === item_id);
  return idx !== -1 ? arr[idx].name : '';
}

export const citiesSelectItems = itemsSelect(cities);
export const countriesSelectItems = itemsSelect(countries);
export const cuisinesSelectItems = itemsSelect(cuisines);
export const seatsSelectItems = seats.map((item, index) => ({
  value: index+1,
  label: item.label,
  })
);
export const restaurantsSelectItems = restaurants.map((rest) => ({
  value: rest.id,
  label: rest.name,
  })
);
export const
  dishCategoriesSelectItems = (restaurant_id) => getItemsByParentId({restaurant_id}, dishCategories);

export const
  dishesSelectItems = (category_id) => getItemsByParentId({category_id}, dishes);

export const
  productsSelectItems = (dish_id) => getItemsByParentId({dish_id}, products);

export const
  restaurantIdToName = (id) => getItemNameById(id, restaurants);

export const
  dishCategoryIdToName = (id) => getItemNameById(id, dishCategories);

export const
  dishIdToName = (id) => getItemNameById(id, dishes);
