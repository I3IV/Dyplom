import client from "feathers/client";
import { citiesStore, restaurantsStore } from "store";
import * as R from "ramda";

export const getAllRestaurants = () =>
  client
    .service("restaurants")
    .find()
    .then(res => res.data);

export const getRestaurant = id =>
  R.find(R.propEq("id", parseInt(id)), restaurantsStore.restaurants);

export const filterByCity = CityName => {
  const restaurants = restaurantsStore.restaurants;
  const City_id = R.find(R.propEq("CityName", CityName), citiesStore.cities).id;
  restaurantsStore.setFilteredRestaurants(
    R.filter(R.pathEq(["address", "City_id"], City_id), restaurants)
  );
};
