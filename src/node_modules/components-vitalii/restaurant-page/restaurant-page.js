import React, { Component, Fragment } from 'react';
import './restaurant-page.css';
import AlertDialog from 'components-vitalii/schedule-item';
import SimpleTabs from 'components-vitalii/dish-categories';
import { getRestaurantById } from 'api'
import DishPage from 'components/pages/dish-page';
import { withRouter } from 'react-router-dom';
import Header from 'components/shared-components/header';

const navItems = [
  {label: 'Dishes', link: '/dishes' },
  {label: 'Restaurants', link: '/restaurants' },
  {label: 'Login', link: '/login' },
  {label: 'Registration', link: '/registration'}
];

class RestaurantPage extends Component{
  state = {
    openDish: false,
    dishToShow: {},
  }
  onDishAddClick = (dish) => {
    this.setState({dishToShow:dish});
    this.setState({openDish: true})
  }
  render(){
    const { id } = this.props.match.params;
    const { name, description, price, address} = getRestaurantById(id);
    const restaurantImage = `url(/images/restaurants/${id}.jpg)`;
    return (
      <Fragment>
        <Header navItems={ navItems } />
        <div className = "restaurant-info" style={{backgroundImage: restaurantImage}}>
          <div className = "restaurant-info-box">
            <div className = "restaurant-name">
              <h2>{name}</h2>
            </div>
            <div className = "restaurant-description">
              <p>{description}</p>
            </div>
            <div className = "restaurant-price">
              <p>{price}</p>
            </div>
            <div className = "restaurant-address">
              <p>{address}</p>
            </div>
            <div className = "scheduleButton">
               <AlertDialog  />
            </div>
          </div>
          <DishPage openDish={this.state.openDish} dishToShow = {this.state.dishToShow}/>
          <SimpleTabs restaurant_id={id} onDishAddClick = {this.onDishAddClick}/>
        </div>
    </Fragment>
      );
  };
}
export default withRouter(RestaurantPage)
