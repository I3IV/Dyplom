{"ast":null,"code":"import _defineProperty from \"H:\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"H:\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"H:\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"H:\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"H:\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"H:\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"H:\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"H:\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"H:\\\\I3IV\\\\Dyplom\\\\src\\\\node_modules\\\\components\\\\pages\\\\schedule-items-page\\\\schedule-dialog\\\\index.js\";\nimport React, { Fragment } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport SelectControl from \"shared-components/select-control\";\nimport DishesList from \"../schedule-item-dishes-list\";\nimport ProductsList from \"../../../../shared-components/products-list\";\nimport RadioSelect from \"shared-components/radio-select\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport \"./schedule-dialog.css\";\nimport { productsSelectItems, dishSizesSelectItems, addressesSelectItems, restaurantIdToName, seatsSelectItems, getRestaurantsSelect, getCategoriesSelect, getDishesSelect, getCustomerAddressesSelect, getDish } from \"api\";\nimport * as R from \"ramda\";\nimport Spinner from \"shared-components/spinner\";\nvar formatter = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n  minimumFractionDigits: 2\n});\n\nvar ScheduleDialog =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ScheduleDialog, _React$Component);\n\n  function ScheduleDialog() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ScheduleDialog);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ScheduleDialog)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      open: false,\n      event: {\n        dishes: []\n      },\n      editMode: false,\n      SelectCategories: [],\n      SelectDishes: []\n    };\n    _this.deliveryLocations = [{\n      id: 1,\n      name: \"In restaurant\"\n    }, {\n      id: 2,\n      name: \"Deliver to address\"\n    }];\n\n    _this.increaseProperty = function (arr, id, propName) {\n      return _this.upDownProperty(arr, id, propName, true);\n    };\n\n    _this.decreaseProperty = function (arr, id, propName) {\n      return _this.upDownProperty(arr, id, propName, false);\n    };\n\n    _this.onRestaurantChange = function (_ref) {\n      var value = _ref.value;\n\n      _this.updateCategoriesSelect(value);\n\n      _this.setState({\n        event: _objectSpread({}, _this.state.event, {\n          title: restaurantIdToName(value),\n          restaurant_id: value,\n          category_id: 0,\n          selectedDish: undefined\n        })\n      });\n    };\n\n    _this.onDishCategoryChange = function (_ref2) {\n      var value = _ref2.value;\n\n      _this.updateDishesSelect(value);\n\n      _this.setState({\n        event: _objectSpread({}, _this.state.event, {\n          category_id: value,\n          selectedDish: undefined\n        })\n      });\n    };\n\n    _this.onDishChange = function (_ref3) {\n      var value = _ref3.value;\n\n      _this.updateSelectedDish(value);\n\n      var newSelectedDish = value ? {\n        id: value,\n        products: productsSelectItems(value).map(function (product) {\n          return _objectSpread({}, product, {\n            checked: true\n          });\n        }),\n        sizes: dishSizesSelectItems(value),\n        size_id: dishSizesSelectItems(value)[0].id\n      } : undefined;\n\n      _this.setState({\n        event: _objectSpread({}, _this.state.event, {\n          selectedDish: newSelectedDish\n        })\n      });\n    };\n\n    _this.onProductChange = function (product_id) {\n      var products = _this.state.event.selectedDish.products;\n\n      var changedProducts = _this.toggleProperty(products, product_id, \"checked\");\n\n      _this.setState({\n        event: _objectSpread({}, _this.state.event, {\n          selectedDish: _objectSpread({}, _this.state.event.selectedDish, {\n            products: changedProducts\n          })\n        })\n      });\n    };\n\n    _this.onDishSizeChange = function (size_id) {\n      var _this$state$SelectedD = _this.state.SelectedDish,\n          dish_sizes = _this$state$SelectedD.dish_sizes,\n          count = _this$state$SelectedD.count;\n      var sizeIdx = dish_sizes.findIndex(function (size) {\n        return R.equals(size.id.toString(), size_id.toString());\n      });\n      var price = dish_sizes[sizeIdx].price;\n\n      _this.setState({\n        SelectedDish: _objectSpread({}, _this.state.SelectedDish, {\n          SelectedSize: size_id,\n          price: price,\n          totalPrice: price * count\n        })\n      });\n\n      _this.setState({\n        event: _objectSpread({}, _this.state.event, {\n          selectedDish: _objectSpread({}, _this.state.event.selectedDish, {\n            size_id: size_id\n          })\n        })\n      });\n    };\n\n    _this.onLocationChange = function (location_id) {\n      if (location_id === '1') _this.setState({\n        event: _objectSpread({}, _this.state.event, {\n          location_id: location_id,\n          address_id: null\n        })\n      });else _this.setState({\n        event: _objectSpread({}, _this.state.event, {\n          location_id: location_id\n        })\n      });\n    };\n\n    _this.onAddressChange = function (_ref4) {\n      var value = _ref4.value;\n\n      _this.setState({\n        event: _objectSpread({}, _this.state.event, {\n          address_id: value\n        })\n      });\n    };\n\n    _this.onSeatsChange = function (_ref5) {\n      var value = _ref5.value;\n\n      _this.setState({\n        event: _objectSpread({}, _this.state.event, {\n          seats: value\n        })\n      });\n    };\n\n    _this.onDishAdd = function () {\n      var _this$state$event$sel = _this.state.event.selectedDish,\n          id = _this$state$event$sel.id,\n          products = _this$state$event$sel.products;\n      var DishName = _this.state.SelectedDish.DishName;\n\n      if (id) {\n        var dishes = _this.state.event.dishes;\n\n        var changedDishes = _this.increaseProperty(dishes, id, \"count\");\n\n        if (changedDishes) {\n          _this.setState({\n            event: _objectSpread({}, _this.state.event, {\n              dishes: changedDishes\n            })\n          });\n        } else {\n          var dish = _objectSpread({\n            id: id,\n            name: DishName,\n            products: products\n          }, _this.state.SelectedDish, {\n            count: 1\n          });\n\n          _this.setState({\n            event: _objectSpread({}, _this.state.event, {\n              dishes: _toConsumableArray(_this.state.event.dishes).concat([dish])\n            })\n          });\n        }\n      }\n    };\n\n    _this.onDishUp = function (dish_id) {\n      var dishes = _this.state.event.dishes;\n\n      var changedDishes = _this.increaseProperty(dishes, dish_id, \"count\");\n\n      _this.setState({\n        event: _objectSpread({}, _this.state.event, {\n          dishes: changedDishes\n        })\n      });\n    };\n\n    _this.onDishDown = function (dish_id) {\n      var dishes = _this.state.event.dishes;\n      var dish = dishes.find(function (dish) {\n        return dish.id === dish_id;\n      });\n      if (dish.count === 1) ;else {\n        var changedDishes = _this.decreaseProperty(dishes, dish_id, \"count\");\n\n        _this.setState({\n          event: _objectSpread({}, _this.state.event, {\n            dishes: changedDishes\n          })\n        });\n      }\n    };\n\n    _this.onDishDelete = function (dish_id) {\n      var dishes = _this.state.event.dishes;\n      var idx = dishes.findIndex(function (dish) {\n        return dish.id === dish_id;\n      });\n\n      var changedDishes = _toConsumableArray(dishes.slice(0, idx)).concat(_toConsumableArray(dishes.slice(idx + 1)));\n\n      _this.setState({\n        event: _objectSpread({}, _this.state.event, {\n          dishes: changedDishes\n        })\n      });\n    };\n\n    _this.onDishClick = function (dish_id) {\n      var dishes = _this.state.event.dishes;\n      var idx = dishes.findIndex(function (dish) {\n        return dish.id === dish_id;\n      });\n\n      _this.setState({\n        SelectedDish: dishes[idx],\n        event: _objectSpread({}, _this.state.event, {\n          selectedDish: dishes[idx]\n        }),\n        editMode: true\n      });\n    };\n\n    _this.onDishEditSave = function () {\n      var _this$state$event = _this.state.event,\n          selectedDish = _this$state$event.selectedDish,\n          dishes = _this$state$event.dishes;\n      var id = selectedDish.id,\n          products = selectedDish.products;\n      var _this$state$SelectedD2 = _this.state.SelectedDish,\n          SelectedSize = _this$state$SelectedD2.SelectedSize,\n          totalPrice = _this$state$SelectedD2.totalPrice,\n          price = _this$state$SelectedD2.price;\n\n      var changedDishes = _this.updateItem(dishes, id, selectedDish, {\n        products: products,\n        SelectedSize: SelectedSize,\n        price: price,\n        totalPrice: totalPrice\n      });\n\n      _this.setState({\n        event: _objectSpread({}, _this.state.event, {\n          dishes: changedDishes,\n          selectedDish: undefined\n        }),\n        editMode: false\n      });\n    };\n\n    _this.onDishEditCancel = function () {\n      _this.setState({\n        event: _objectSpread({}, _this.state.event, {\n          selectedDish: undefined\n        }),\n        editMode: false\n      });\n    };\n\n    _this.handleClickOpen = function () {\n      _this.setState({\n        open: true\n      });\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        open: false\n      });\n    };\n\n    _this.handleApply = function () {\n      _this.setState({\n        open: false\n      });\n\n      _this.props.handleApply(_objectSpread({}, _this.state.event, {\n        TotalPrice: _this.countTotal()\n      }));\n    };\n\n    _this.handleDelete = function () {\n      _this.props.handleDelete(_this.state.event);\n\n      _this.setState({\n        open: false\n      });\n    };\n\n    _this.countTotal = function () {\n      var total = 0;\n\n      _this.state.event.dishes.forEach(function (dish) {\n        total += dish.totalPrice;\n      });\n\n      return total;\n    };\n\n    return _this;\n  }\n\n  _createClass(ScheduleDialog, [{\n    key: \"setSelect\",\n    value: function setSelect(selectMethod, selectName) {\n      var _this2 = this;\n\n      this.setState({\n        loading: true\n      });\n      selectMethod().then(function (selects) {\n        var _this2$setState;\n\n        _this2.setState((_this2$setState = {}, _defineProperty(_this2$setState, selectName, selects), _defineProperty(_this2$setState, \"loading\", false), _this2$setState));\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.dialogOpen !== this.state.open) {\n        this.setState({\n          open: nextProps.dialogOpen,\n          event: nextProps.event,\n          editMode: false\n        });\n        var r_id = nextProps.event.restaurant_id;\n        if (r_id) this.updateCategoriesSelect(r_id);\n        if (nextProps.event.address_id) this.setState({\n          event: _objectSpread({}, nextProps.event, {\n            location_id: \"2\"\n          })\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setSelect(getRestaurantsSelect, \"SelectRestaurant\");\n      this.setSelect(getCustomerAddressesSelect, \"SelectAddresses\");\n    }\n  }, {\n    key: \"updateCategoriesSelect\",\n    value: function updateCategoriesSelect(restaurant_id) {\n      this.setSelect(function () {\n        return getCategoriesSelect(restaurant_id);\n      }, \"SelectCategories\");\n    }\n  }, {\n    key: \"updateDishesSelect\",\n    value: function updateDishesSelect(category_id) {\n      this.setSelect(function () {\n        return getDishesSelect(category_id);\n      }, \"SelectDishes\");\n    }\n  }, {\n    key: \"updateSelectedDish\",\n    value: function updateSelectedDish(dish_id) {\n      var _this3 = this;\n\n      if (!dish_id) return;\n      this.setState({\n        loading: true\n      });\n      getDish(dish_id).then(function (dish) {\n        _this3.setState({\n          SelectedDish: _objectSpread({}, dish, {\n            SelectedSize: dish.dish_sizes[0].id,\n            price: dish.dish_sizes[0].price,\n            totalPrice: dish.dish_sizes[0].price,\n            count: 1\n          }),\n          loading: false\n        });\n      });\n    }\n  }, {\n    key: \"comparePropeties\",\n    value: function comparePropeties(oldObj, newObj, properties) {\n      var idx = properties.findIndex(function (propName) {\n        return oldObj[propName] !== newObj[propName];\n      });\n      return idx === -1 ? true : false;\n    }\n  }, {\n    key: \"compareDishes\",\n    value: function compareDishes(oldDish, newDish) {\n      if (this.comparePropeties(oldDish, newDish, [\"size_id\"]) && this.comparePropeties(oldDish.products, newDish.products, [\"checked\"])) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"upDownProperty\",\n    value: function upDownProperty(arr, id, propName, upDown) {\n      var _objectSpread2;\n\n      var idx = arr.findIndex(function (el) {\n        return el.id === id;\n      });\n      if (idx === -1) return;\n      var oldItem = arr[idx];\n      var newPropValue = upDown ? ++oldItem[propName] : --oldItem[propName];\n\n      var newItem = _objectSpread({}, oldItem, (_objectSpread2 = {}, _defineProperty(_objectSpread2, propName, newPropValue), _defineProperty(_objectSpread2, \"totalPrice\", oldItem.price * newPropValue), _objectSpread2));\n\n      return _toConsumableArray(arr.slice(0, idx)).concat([newItem], _toConsumableArray(arr.slice(idx + 1)));\n    }\n  }, {\n    key: \"toggleProperty\",\n    value: function toggleProperty(arr, id, propName) {\n      var idx = arr.findIndex(function (el) {\n        return el.value === id;\n      });\n      var oldItem = arr[idx];\n\n      var newItem = _objectSpread({}, oldItem, _defineProperty({}, propName, !oldItem[propName]));\n\n      return _toConsumableArray(arr.slice(0, idx)).concat([newItem], _toConsumableArray(arr.slice(idx + 1)));\n    }\n  }, {\n    key: \"updateItem\",\n    value: function updateItem(arr, id, item, props) {\n      var idx = arr.findIndex(function (el) {\n        return el.id === id;\n      });\n      var newItem = props ? _objectSpread({}, arr[idx], props) : item;\n      return _toConsumableArray(arr.slice(0, idx)).concat([newItem], _toConsumableArray(arr.slice(idx + 1)));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state = this.state,\n          editMode = _this$state.editMode,\n          event = _this$state.event;\n      var restaurant_id = event.restaurant_id,\n          category_id = event.category_id,\n          selectedDish = event.selectedDish,\n          start = event.start,\n          dishes = event.dishes,\n          location_id = event.location_id,\n          address_id = event.address_id,\n          seats = event.seats;\n      var location = location_id ? location_id : \"1\";\n\n      var SelectRestaurant = function SelectRestaurant() {\n        return !editMode && React.createElement(SelectControl, {\n          onSelectChange: _this4.onRestaurantChange,\n          name: \"title\",\n          value: restaurant_id,\n          items: _this4.state.SelectRestaurant,\n          emptyValue: \"Select restaurant\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 377\n          },\n          __self: this\n        });\n      };\n\n      var SelectCategory = function SelectCategory() {\n        return !editMode && React.createElement(SelectControl, {\n          onSelectChange: _this4.onDishCategoryChange,\n          name: \"category\",\n          value: category_id,\n          items: _this4.state.SelectCategories,\n          emptyValue: \"Select category\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 387\n          },\n          __self: this\n        });\n      };\n\n      var SelectDish = function SelectDish() {\n        return !editMode && React.createElement(SelectControl, {\n          onSelectChange: _this4.onDishChange,\n          name: \"dish\",\n          value: selectedDish ? selectedDish.id : 0,\n          items: _this4.state.SelectDishes,\n          emptyValue: \"Select dish\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 397\n          },\n          __self: this\n        });\n      };\n\n      var SelectLocation = function SelectLocation() {\n        return dishes.length > 0 && !editMode && React.createElement(RadioSelect, {\n          items: _this4.deliveryLocations,\n          selected: location_id,\n          onChange: _this4.onLocationChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 408\n          },\n          __self: this\n        });\n      };\n\n      var SelectSeats = function SelectSeats() {\n        return location === \"1\" && !editMode && dishes.length > 0 && React.createElement(SelectControl, {\n          onSelectChange: _this4.onSeatsChange,\n          name: \"seats\",\n          items: seatsSelectItems,\n          value: seats,\n          emptyValue: \"Select seats number\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 418\n          },\n          __self: this\n        });\n      };\n\n      var SelectAddress = function SelectAddress() {\n        return location === \"2\" && !editMode && dishes.length > 0 && React.createElement(SelectControl, {\n          onSelectChange: _this4.onAddressChange,\n          name: \"title\",\n          value: address_id,\n          items: _this4.state.SelectAddresses,\n          emptyValue: \"Select address\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 430\n          },\n          __self: this\n        });\n      };\n\n      var DishProducts = function DishProducts() {\n        return selectedDish !== undefined && React.createElement(ProductsList, {\n          items: selectedDish.products ? selectedDish.products : [],\n          onProductChange: _this4.onProductChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 440\n          },\n          __self: this\n        });\n      };\n\n      var DishSizes = function DishSizes() {\n        return selectedDish !== undefined && React.createElement(RadioSelect, {\n          items: _this4.state.SelectedDish.dish_sizes.map(function (s) {\n            return {\n              id: s.id,\n              name: s.DishSizeName\n            };\n          }),\n          selected: _this4.state.SelectedDish.SelectedSize,\n          onChange: _this4.onDishSizeChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 448\n          },\n          __self: this\n        });\n      };\n\n      var ButtonAdd = function ButtonAdd() {\n        return !editMode && React.createElement(Button, {\n          onClick: _this4.onDishAdd,\n          disabled: !(restaurant_id && category_id && selectedDish),\n          color: \"secondary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 461\n          },\n          __self: this\n        }, \"Add\");\n      };\n\n      var ButtonEditSave = function ButtonEditSave() {\n        return editMode && React.createElement(Button, {\n          onClick: _this4.onDishEditSave,\n          color: \"secondary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 471\n          },\n          __self: this\n        }, \"Save\");\n      };\n\n      var ButtonEditCancel = function ButtonEditCancel() {\n        return editMode && React.createElement(Button, {\n          onClick: _this4.onDishEditCancel,\n          color: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 477\n          },\n          __self: this\n        }, \"Cancel\");\n      };\n\n      var content = !this.state.loading ? React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 482\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"selects\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483\n        },\n        __self: this\n      }, React.createElement(SelectRestaurant, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 484\n        },\n        __self: this\n      }), React.createElement(SelectCategory, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 485\n        },\n        __self: this\n      }), React.createElement(SelectDish, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 486\n        },\n        __self: this\n      }), React.createElement(DishProducts, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 487\n        },\n        __self: this\n      }), React.createElement(DishSizes, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 488\n        },\n        __self: this\n      }), React.createElement(ButtonAdd, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row-elements\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 490\n        },\n        __self: this\n      }, React.createElement(ButtonEditCancel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 491\n        },\n        __self: this\n      }), React.createElement(ButtonEditSave, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 492\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"column-elements\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 495\n        },\n        __self: this\n      }, React.createElement(DishesList, {\n        items: dishes,\n        onDishUp: this.onDishUp,\n        onDishDown: this.onDishDown,\n        onDishDelete: this.onDishDelete,\n        onDishClick: this.onDishClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 496\n        },\n        __self: this\n      }), React.createElement(SelectLocation, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 503\n        },\n        __self: this\n      }), React.createElement(SelectAddress, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 504\n        },\n        __self: this\n      }), React.createElement(SelectSeats, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 505\n        },\n        __self: this\n      }))) : React.createElement(Spinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 509\n        },\n        __self: this\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 512\n        },\n        __self: this\n      }, React.createElement(Dialog, {\n        open: this.state.open,\n        onClose: this.handleClose,\n        \"aria-labelledby\": \"form-dialog-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 513\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        id: \"form-dialog-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 518\n        },\n        __self: this\n      }, start ? start.toLocaleString() : \"Schedule Item\"), React.createElement(DialogContent, {\n        className: \"schedule-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522\n        },\n        __self: this\n      }, content), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 524\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleDelete,\n        color: \"secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 525\n        },\n        __self: this\n      }, React.createElement(DeleteIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 526\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 528\n        },\n        __self: this\n      }, \"Total: \", formatter.format(this.countTotal())), React.createElement(Button, {\n        onClick: this.handleClose,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 529\n        },\n        __self: this\n      }, \"Close\"), React.createElement(Button, {\n        onClick: this.handleApply,\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 532\n        },\n        __self: this\n      }, \"Apply changes\"))));\n    }\n  }]);\n\n  return ScheduleDialog;\n}(React.Component);\n\nexport { ScheduleDialog as default };","map":{"version":3,"sources":["H:\\I3IV\\Dyplom\\src\\node_modules\\components\\pages\\schedule-items-page\\schedule-dialog\\index.js"],"names":["React","Fragment","Button","Dialog","DialogActions","DialogTitle","DialogContent","SelectControl","DishesList","ProductsList","RadioSelect","DeleteIcon","productsSelectItems","dishSizesSelectItems","addressesSelectItems","restaurantIdToName","seatsSelectItems","getRestaurantsSelect","getCategoriesSelect","getDishesSelect","getCustomerAddressesSelect","getDish","R","Spinner","formatter","Intl","NumberFormat","style","currency","minimumFractionDigits","ScheduleDialog","state","open","event","dishes","editMode","SelectCategories","SelectDishes","deliveryLocations","id","name","increaseProperty","arr","propName","upDownProperty","decreaseProperty","onRestaurantChange","value","updateCategoriesSelect","setState","title","restaurant_id","category_id","selectedDish","undefined","onDishCategoryChange","updateDishesSelect","onDishChange","updateSelectedDish","newSelectedDish","products","map","product","checked","sizes","size_id","onProductChange","product_id","changedProducts","toggleProperty","onDishSizeChange","SelectedDish","dish_sizes","count","sizeIdx","findIndex","size","equals","toString","price","SelectedSize","totalPrice","onLocationChange","location_id","address_id","onAddressChange","onSeatsChange","seats","onDishAdd","DishName","changedDishes","dish","onDishUp","dish_id","onDishDown","find","onDishDelete","idx","slice","onDishClick","onDishEditSave","updateItem","onDishEditCancel","handleClickOpen","handleClose","handleApply","props","TotalPrice","countTotal","handleDelete","total","forEach","selectMethod","selectName","loading","then","selects","nextProps","dialogOpen","r_id","setSelect","oldObj","newObj","properties","oldDish","newDish","comparePropeties","upDown","el","oldItem","newPropValue","newItem","item","start","location","SelectRestaurant","SelectCategory","SelectDish","SelectLocation","length","SelectSeats","SelectAddress","SelectAddresses","DishProducts","DishSizes","s","DishSizeName","ButtonAdd","ButtonEditSave","ButtonEditCancel","content","toLocaleString","format","Component"],"mappings":"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","sourcesContent":["import React, { Fragment } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport SelectControl from \"shared-components/select-control\";\r\nimport DishesList from \"../schedule-item-dishes-list\";\r\nimport ProductsList from \"../../../../shared-components/products-list\";\r\nimport RadioSelect from \"shared-components/radio-select\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport \"./schedule-dialog.css\";\r\nimport {\r\n  productsSelectItems,\r\n  dishSizesSelectItems,\r\n  addressesSelectItems,\r\n  restaurantIdToName,\r\n  seatsSelectItems,\r\n  getRestaurantsSelect,\r\n  getCategoriesSelect,\r\n  getDishesSelect,\r\n  getCustomerAddressesSelect,\r\n  getDish\r\n} from \"api\";\r\nimport * as R from \"ramda\";\r\nimport Spinner from \"shared-components/spinner\";\r\n\r\nconst formatter = new Intl.NumberFormat(\"en-US\", {\r\n  style: \"currency\",\r\n  currency: \"USD\",\r\n  minimumFractionDigits: 2\r\n});\r\n\r\nexport default class ScheduleDialog extends React.Component {\r\n  state = {\r\n    open: false,\r\n    event: { dishes: [] },\r\n    editMode: false,\r\n    SelectCategories: [],\r\n    SelectDishes: []\r\n  };\r\n  deliveryLocations = [\r\n    { id: 1, name: \"In restaurant\" },\r\n    { id: 2, name: \"Deliver to address\" }\r\n  ];\r\n  setSelect(selectMethod, selectName) {\r\n    this.setState({ loading: true });\r\n    selectMethod().then(selects => {\r\n      this.setState({ [selectName]: selects, loading: false });\r\n    });\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.dialogOpen !== this.state.open) {\r\n      this.setState({\r\n        open: nextProps.dialogOpen,\r\n        event: nextProps.event,\r\n        editMode: false\r\n      });\r\n      const r_id = nextProps.event.restaurant_id;\r\n      if (r_id) this.updateCategoriesSelect(r_id);\r\n      if (nextProps.event.address_id)\r\n        this.setState({ event: { ...nextProps.event, location_id: \"2\" } });\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    this.setSelect(getRestaurantsSelect, \"SelectRestaurant\");\r\n    this.setSelect(getCustomerAddressesSelect, \"SelectAddresses\");\r\n  }\r\n\r\n  updateCategoriesSelect(restaurant_id) {\r\n    this.setSelect(\r\n      () => getCategoriesSelect(restaurant_id),\r\n      \"SelectCategories\"\r\n    );\r\n  }\r\n  updateDishesSelect(category_id) {\r\n    this.setSelect(() => getDishesSelect(category_id), \"SelectDishes\");\r\n  }\r\n  updateSelectedDish(dish_id) {\r\n    if (!dish_id) return;\r\n    this.setState({ loading: true });\r\n    getDish(dish_id).then(dish => {\r\n      this.setState({\r\n        SelectedDish: {\r\n          ...dish,\r\n          SelectedSize: dish.dish_sizes[0].id,\r\n          price: dish.dish_sizes[0].price,\r\n          totalPrice: dish.dish_sizes[0].price,\r\n          count: 1\r\n        },\r\n        loading: false\r\n      });\r\n    });\r\n  }\r\n  comparePropeties(oldObj, newObj, properties) {\r\n    const idx = properties.findIndex(propName => {\r\n      return oldObj[propName] !== newObj[propName];\r\n    });\r\n    return idx === -1 ? true : false;\r\n  }\r\n  compareDishes(oldDish, newDish) {\r\n    if (\r\n      this.comparePropeties(oldDish, newDish, [\"size_id\"]) &&\r\n      this.comparePropeties(oldDish.products, newDish.products, [\"checked\"])\r\n    ) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  upDownProperty(arr, id, propName, upDown) {\r\n    const idx = arr.findIndex(el => el.id === id);\r\n    if (idx === -1) return;\r\n\r\n    const oldItem = arr[idx];\r\n    const newPropValue = upDown ? ++oldItem[propName] : --oldItem[propName];\r\n    const newItem = {\r\n      ...oldItem,\r\n      [propName]: newPropValue,\r\n      totalPrice: oldItem.price * newPropValue\r\n    };\r\n    return [...arr.slice(0, idx), newItem, ...arr.slice(idx + 1)];\r\n  }\r\n  toggleProperty(arr, id, propName) {\r\n    const idx = arr.findIndex(el => el.value === id);\r\n    const oldItem = arr[idx];\r\n    const newItem = { ...oldItem, [propName]: !oldItem[propName] };\r\n\r\n    return [...arr.slice(0, idx), newItem, ...arr.slice(idx + 1)];\r\n  }\r\n  updateItem(arr, id, item, props) {\r\n    const idx = arr.findIndex(el => el.id === id);\r\n    const newItem = props ? { ...arr[idx], ...props } : item;\r\n    return [...arr.slice(0, idx), newItem, ...arr.slice(idx + 1)];\r\n  }\r\n\r\n  increaseProperty = (arr, id, propName) =>\r\n    this.upDownProperty(arr, id, propName, true);\r\n  decreaseProperty = (arr, id, propName) =>\r\n    this.upDownProperty(arr, id, propName, false);\r\n\r\n  onRestaurantChange = ({ value }) => {\r\n    this.updateCategoriesSelect(value);\r\n    this.setState({\r\n      event: {\r\n        ...this.state.event,\r\n        title: restaurantIdToName(value),\r\n        restaurant_id: value,\r\n        category_id: 0,\r\n        selectedDish: undefined\r\n      }\r\n    });\r\n  };\r\n  onDishCategoryChange = ({ value }) => {\r\n    this.updateDishesSelect(value);\r\n    this.setState({\r\n      event: {\r\n        ...this.state.event,\r\n        category_id: value,\r\n        selectedDish: undefined\r\n      }\r\n    });\r\n  };\r\n  onDishChange = ({ value }) => {\r\n    this.updateSelectedDish(value);\r\n    const newSelectedDish = value\r\n      ? {\r\n          id: value,\r\n          products: productsSelectItems(value).map(product => ({\r\n            ...product,\r\n            checked: true\r\n          })),\r\n          sizes: dishSizesSelectItems(value),\r\n          size_id: dishSizesSelectItems(value)[0].id\r\n        }\r\n      : undefined;\r\n    this.setState({\r\n      event: { ...this.state.event, selectedDish: newSelectedDish }\r\n    });\r\n  };\r\n  onProductChange = product_id => {\r\n    const { products } = this.state.event.selectedDish;\r\n    const changedProducts = this.toggleProperty(\r\n      products,\r\n      product_id,\r\n      \"checked\"\r\n    );\r\n    this.setState({\r\n      event: {\r\n        ...this.state.event,\r\n        selectedDish: {\r\n          ...this.state.event.selectedDish,\r\n          products: changedProducts\r\n        }\r\n      }\r\n    });\r\n  };\r\n  onDishSizeChange = size_id => {\r\n    const { dish_sizes, count } = this.state.SelectedDish;\r\n    const sizeIdx = dish_sizes.findIndex(size =>\r\n      R.equals(size.id.toString(), size_id.toString())\r\n    );\r\n    const price = dish_sizes[sizeIdx].price;\r\n    this.setState({\r\n      SelectedDish: {\r\n        ...this.state.SelectedDish,\r\n        SelectedSize: size_id,\r\n        price,\r\n        totalPrice: price * count\r\n      }\r\n    });\r\n    this.setState({\r\n      event: {\r\n        ...this.state.event,\r\n        selectedDish: { ...this.state.event.selectedDish, size_id }\r\n      }\r\n    });\r\n  };\r\n  onLocationChange = location_id => {\r\n    if(location_id === '1')\r\n    this.setState({\r\n      event: { ...this.state.event, location_id: location_id, address_id: null }\r\n    });\r\n    else\r\n      this.setState({\r\n        event: { ...this.state.event, location_id: location_id }\r\n      });\r\n\r\n  };\r\n  onAddressChange = ({ value }) => {\r\n    this.setState({\r\n      event: { ...this.state.event, address_id: value }\r\n    });\r\n  };\r\n  onSeatsChange = ({ value }) => {\r\n    this.setState({\r\n      event: { ...this.state.event, seats: value }\r\n    });\r\n  };\r\n\r\n  onDishAdd = () => {\r\n    const { id, products } = this.state.event.selectedDish;\r\n    const { DishName } = this.state.SelectedDish;\r\n\r\n    if (id) {\r\n      const dishes = this.state.event.dishes;\r\n      const changedDishes = this.increaseProperty(dishes, id, \"count\");\r\n\r\n      if (changedDishes) {\r\n        this.setState({\r\n          event: { ...this.state.event, dishes: changedDishes }\r\n        });\r\n      } else {\r\n        const dish = {\r\n          id,\r\n          name: DishName,\r\n          products: products,\r\n          ...this.state.SelectedDish,\r\n          count: 1\r\n        };\r\n        this.setState({\r\n          event: {\r\n            ...this.state.event,\r\n            dishes: [...this.state.event.dishes, dish]\r\n          }\r\n        });\r\n      }\r\n    }\r\n  };\r\n  onDishUp = dish_id => {\r\n    const dishes = this.state.event.dishes;\r\n    const changedDishes = this.increaseProperty(dishes, dish_id, \"count\");\r\n\r\n    this.setState({\r\n      event: { ...this.state.event, dishes: changedDishes }\r\n    });\r\n  };\r\n  onDishDown = dish_id => {\r\n    const dishes = this.state.event.dishes;\r\n    const dish = dishes.find(dish => dish.id === dish_id);\r\n\r\n    if (dish.count === 1);\r\n    else {\r\n      const changedDishes = this.decreaseProperty(dishes, dish_id, \"count\");\r\n\r\n      this.setState({\r\n        event: { ...this.state.event, dishes: changedDishes }\r\n      });\r\n    }\r\n  };\r\n  onDishDelete = dish_id => {\r\n    const dishes = this.state.event.dishes;\r\n    const idx = dishes.findIndex(dish => dish.id === dish_id);\r\n    const changedDishes = [...dishes.slice(0, idx), ...dishes.slice(idx + 1)];\r\n    this.setState({\r\n      event: { ...this.state.event, dishes: changedDishes }\r\n    });\r\n  };\r\n  onDishClick = dish_id => {\r\n    const dishes = this.state.event.dishes;\r\n    const idx = dishes.findIndex(dish => dish.id === dish_id);\r\n    this.setState({\r\n      SelectedDish: dishes[idx],\r\n      event: { ...this.state.event, selectedDish: dishes[idx] },\r\n      editMode: true\r\n    });\r\n  };\r\n  onDishEditSave = () => {\r\n    const { selectedDish, dishes } = this.state.event;\r\n    const { id, products } = selectedDish;\r\n    const { SelectedSize, totalPrice, price } = this.state.SelectedDish;\r\n    const changedDishes = this.updateItem(dishes, id, selectedDish, {\r\n      products,\r\n      SelectedSize,\r\n      price,\r\n      totalPrice\r\n    });\r\n    this.setState({\r\n      event: {\r\n        ...this.state.event,\r\n        dishes: changedDishes,\r\n        selectedDish: undefined\r\n      },\r\n      editMode: false\r\n    });\r\n  };\r\n  onDishEditCancel = () => {\r\n    this.setState({\r\n      event: { ...this.state.event, selectedDish: undefined },\r\n      editMode: false\r\n    });\r\n  };\r\n\r\n  handleClickOpen = () => {\r\n    this.setState({ open: true });\r\n  };\r\n  handleClose = () => {\r\n    this.setState({ open: false });\r\n  };\r\n  handleApply = () => {\r\n    this.setState({ open: false });\r\n    this.props.handleApply({\r\n      ...this.state.event,\r\n      TotalPrice: this.countTotal()\r\n    });\r\n  };\r\n  handleDelete = () => {\r\n    this.props.handleDelete(this.state.event);\r\n    this.setState({ open: false });\r\n  };\r\n  countTotal = () => {\r\n    let total = 0;\r\n    this.state.event.dishes.forEach(dish => {\r\n      total += dish.totalPrice;\r\n    });\r\n    return total;\r\n  };\r\n  render() {\r\n    const { editMode, event } = this.state;\r\n    const {\r\n      restaurant_id,\r\n      category_id,\r\n      selectedDish,\r\n      start,\r\n      dishes,\r\n      location_id,\r\n      address_id,\r\n      seats\r\n    } = event;\r\n\r\n    const location = location_id ? location_id : \"1\";\r\n\r\n    const SelectRestaurant = () =>\r\n      !editMode && (\r\n        <SelectControl\r\n          onSelectChange={this.onRestaurantChange}\r\n          name=\"title\"\r\n          value={restaurant_id}\r\n          items={this.state.SelectRestaurant}\r\n          emptyValue=\"Select restaurant\"\r\n        />\r\n      );\r\n    const SelectCategory = () =>\r\n      !editMode && (\r\n        <SelectControl\r\n          onSelectChange={this.onDishCategoryChange}\r\n          name=\"category\"\r\n          value={category_id}\r\n          items={this.state.SelectCategories}\r\n          emptyValue=\"Select category\"\r\n        />\r\n      );\r\n    const SelectDish = () =>\r\n      !editMode && (\r\n        <SelectControl\r\n          onSelectChange={this.onDishChange}\r\n          name=\"dish\"\r\n          value={selectedDish ? selectedDish.id : 0}\r\n          items={this.state.SelectDishes}\r\n          emptyValue=\"Select dish\"\r\n        />\r\n      );\r\n    const SelectLocation = () =>\r\n      dishes.length > 0 &&\r\n      !editMode && (\r\n        <RadioSelect\r\n          items={this.deliveryLocations}\r\n          selected={location_id}\r\n          onChange={this.onLocationChange}\r\n        />\r\n      );\r\n    const SelectSeats = () =>\r\n      location === \"1\" &&\r\n      !editMode &&\r\n      dishes.length > 0 && (\r\n        <SelectControl\r\n          onSelectChange={this.onSeatsChange}\r\n          name=\"seats\"\r\n          items={seatsSelectItems}\r\n          value={seats}\r\n          emptyValue=\"Select seats number\"\r\n        />\r\n      );\r\n    const SelectAddress = () =>\r\n      location === \"2\" &&\r\n      !editMode &&\r\n      dishes.length > 0 && (\r\n        <SelectControl\r\n          onSelectChange={this.onAddressChange}\r\n          name=\"title\"\r\n          value={address_id}\r\n          items={this.state.SelectAddresses}\r\n          emptyValue=\"Select address\"\r\n        />\r\n      );\r\n    const DishProducts = () =>\r\n      selectedDish !== undefined && (\r\n        <ProductsList\r\n          items={selectedDish.products ? selectedDish.products : []}\r\n          onProductChange={this.onProductChange}\r\n        />\r\n      );\r\n    const DishSizes = () => {\r\n      return (\r\n        selectedDish !== undefined && (\r\n          <RadioSelect\r\n            items={this.state.SelectedDish.dish_sizes.map(s => ({\r\n              id: s.id,\r\n              name: s.DishSizeName\r\n            }))}\r\n            selected={this.state.SelectedDish.SelectedSize}\r\n            onChange={this.onDishSizeChange}\r\n          />\r\n        )\r\n      );\r\n    };\r\n    const ButtonAdd = () =>\r\n      !editMode && (\r\n        <Button\r\n          onClick={this.onDishAdd}\r\n          disabled={!(restaurant_id && category_id && selectedDish)}\r\n          color=\"secondary\"\r\n        >\r\n          Add\r\n        </Button>\r\n      );\r\n    const ButtonEditSave = () =>\r\n      editMode && (\r\n        <Button onClick={this.onDishEditSave} color=\"secondary\">\r\n          Save\r\n        </Button>\r\n      );\r\n    const ButtonEditCancel = () =>\r\n      editMode && (\r\n        <Button onClick={this.onDishEditCancel} color=\"primary\">\r\n          Cancel\r\n        </Button>\r\n      );\r\n    const content = !this.state.loading ? (\r\n      <Fragment>\r\n        <div className=\"selects\">\r\n          <SelectRestaurant />\r\n          <SelectCategory />\r\n          <SelectDish />\r\n          <DishProducts />\r\n          <DishSizes />\r\n          <ButtonAdd />\r\n          <div className=\"row-elements\">\r\n            <ButtonEditCancel />\r\n            <ButtonEditSave />\r\n          </div>\r\n        </div>\r\n        <div className=\"column-elements\">\r\n          <DishesList\r\n            items={dishes}\r\n            onDishUp={this.onDishUp}\r\n            onDishDown={this.onDishDown}\r\n            onDishDelete={this.onDishDelete}\r\n            onDishClick={this.onDishClick}\r\n          />\r\n          <SelectLocation />\r\n          <SelectAddress />\r\n          <SelectSeats />\r\n        </div>\r\n      </Fragment>\r\n    ) : (\r\n      <Spinner />\r\n    );\r\n    return (\r\n      <div>\r\n        <Dialog\r\n          open={this.state.open}\r\n          onClose={this.handleClose}\r\n          aria-labelledby=\"form-dialog-title\"\r\n        >\r\n          <DialogTitle id=\"form-dialog-title\">\r\n            {start ? start.toLocaleString() : `Schedule Item`}\r\n          </DialogTitle>\r\n\r\n          <DialogContent className=\"schedule-item\">{content}</DialogContent>\r\n\r\n          <DialogActions>\r\n            <Button onClick={this.handleDelete} color=\"secondary\">\r\n              <DeleteIcon />\r\n            </Button>\r\n            <p>Total: {formatter.format(this.countTotal())}</p>\r\n            <Button onClick={this.handleClose} color=\"primary\">\r\n              Close\r\n            </Button>\r\n            <Button onClick={this.handleApply} color=\"primary\">\r\n              Apply changes\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}