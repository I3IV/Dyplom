import { decorate, observable, action, computed } from "mobx";
import * as R from "ramda";
import {citiesStore} from "store";

class RestaurantsStore {
  restaurants = null;

  setRestaurants(restaurants) {
    this.restaurants = restaurants;
  }
  get filteredRestaurants(){
    const restaurants = this.restaurants;
    const city = R.find(R.propEq("CityName", citiesStore.selectedCityName), citiesStore.cities);
    return city ? R.filter(R.pathEq(["address", "City_id"], city.id), restaurants) : restaurants;
  }
}

decorate(RestaurantsStore, {
  restaurants: observable,
  setRestaurants: action,
  filteredRestaurants: computed
});
export default RestaurantsStore;
