{"ast":null,"code":"import _classCallCheck from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\src\\\\node_modules\\\\components-vitalii\\\\restaurant-page\\\\restaurant-page.js\";\nimport React, { Component, Fragment } from \"react\";\nimport \"./restaurant-page.css\";\nimport { withRouter } from \"react-router-dom\";\nimport Spinner from \"components/spinner\";\nimport DishCategories from \"components-vitalii/dish-categories\";\nimport RestaurantView from \"./restaurant-view\";\nimport Header from \"components/shared-components/header\";\nimport { getRestaurant, getDishesByRestId, getDishCategoriesByRestId } from \"api\";\nvar navItems = [{\n  label: \"Dishes\",\n  link: \"/dishes\"\n}, {\n  label: \"Restaurants\",\n  link: \"/restaurants\"\n}, {\n  label: \"Login\",\n  link: \"/login\"\n}, {\n  label: \"Registration\",\n  link: \"/registration\"\n}];\n\nvar RestaurantPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RestaurantPage, _Component);\n\n  function RestaurantPage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, RestaurantPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(RestaurantPage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      openDish: false,\n      dishToShow: {}\n    };\n\n    _this.onDishAddClick = function (dish) {\n      _this.setState({\n        dishToShow: dish\n      });\n\n      _this.setState({\n        openDish: true\n      });\n    };\n\n    _this.handleDishClose = function () {\n      _this.setState({\n        openDish: false\n      });\n    };\n\n    _this.filterDishes = function (dishes, category_id) {\n      if (!category_id || category_id === 0) return dishes;\n      return dishes.filter(function (dish) {\n        return dish.Category_id === category_id;\n      });\n    };\n\n    _this.handleMenu = function (category_id) {\n      _this.setState({\n        category_id: category_id\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(RestaurantPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var restId = this.props.match.params.id;\n      getRestaurant(restId).then(function (restaurant) {\n        _this2.setState({\n          restaurant: restaurant\n        });\n      });\n      Promise.all([getDishCategoriesByRestId(restId), getDishesByRestId(restId)]).then(function (res) {\n        _this2.setState({\n          categories: res[0],\n          dishes: res[1],\n          category_id: \"\"\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          restaurant = _this$state.restaurant,\n          openDish = _this$state.openDish,\n          dishToShow = _this$state.dishToShow,\n          dishes = _this$state.dishes,\n          categories = _this$state.categories,\n          category_id = _this$state.category_id;\n      var dishesToShow = this.filterDishes(dishes, category_id);\n      var MenuView = dishesToShow ? React.createElement(DishCategories, {\n        categories: categories,\n        dishes: dishesToShow,\n        onDishAddClick: this.onDishAddClick,\n        handleMenu: this.handleMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }) : React.createElement(Spinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      });\n      var content = restaurant ? React.createElement(RestaurantView, {\n        data: {\n          restaurant: restaurant,\n          openDish: openDish,\n          dishToShow: dishToShow,\n          MenuView: MenuView,\n          handleDishClose: this.handleDishClose,\n          onDishAddClick: this.onDishAddClick\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }) : React.createElement(Spinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      });\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(Header, {\n        navItems: navItems,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }), content);\n    }\n  }]);\n\n  return RestaurantPage;\n}(Component);\n\nexport default withRouter(RestaurantPage);","map":{"version":3,"sources":["D:\\Studia\\React\\I3IV\\Dyplom\\src\\node_modules\\components-vitalii\\restaurant-page\\restaurant-page.js"],"names":["React","Component","Fragment","withRouter","Spinner","DishCategories","RestaurantView","Header","getRestaurant","getDishesByRestId","getDishCategoriesByRestId","navItems","label","link","RestaurantPage","state","openDish","dishToShow","onDishAddClick","dish","setState","handleDishClose","filterDishes","dishes","category_id","filter","Category_id","handleMenu","restId","props","match","params","id","then","restaurant","Promise","all","res","categories","dishesToShow","MenuView","content"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAO,uBAAP;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,OAAOC,cAAP,MAA2B,oCAA3B;AACA,OAAOC,cAAP,MAA2B,mBAA3B;AACA,OAAOC,MAAP,MAAmB,qCAAnB;AACA,SACEC,aADF,EAEEC,iBAFF,EAGEC,yBAHF,QAIO,KAJP;AAMA,IAAMC,QAAQ,GAAG,CACf;AAAEC,EAAAA,KAAK,EAAE,QAAT;AAAmBC,EAAAA,IAAI,EAAE;AAAzB,CADe,EAEf;AAAED,EAAAA,KAAK,EAAE,aAAT;AAAwBC,EAAAA,IAAI,EAAE;AAA9B,CAFe,EAGf;AAAED,EAAAA,KAAK,EAAE,OAAT;AAAkBC,EAAAA,IAAI,EAAE;AAAxB,CAHe,EAIf;AAAED,EAAAA,KAAK,EAAE,cAAT;AAAyBC,EAAAA,IAAI,EAAE;AAA/B,CAJe,CAAjB;;IAOMC,c;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,QAAQ,EAAE,KADJ;AAENC,MAAAA,UAAU,EAAE;AAFN,K;;UAoBRC,c,GAAiB,UAAAC,IAAI,EAAI;AACvB,YAAKC,QAAL,CAAc;AAAEH,QAAAA,UAAU,EAAEE;AAAd,OAAd;;AACA,YAAKC,QAAL,CAAc;AAAEJ,QAAAA,QAAQ,EAAE;AAAZ,OAAd;AACD,K;;UACDK,e,GAAkB,YAAM;AACtB,YAAKD,QAAL,CAAc;AAAEJ,QAAAA,QAAQ,EAAE;AAAZ,OAAd;AACD,K;;UACDM,Y,GAAe,UAACC,MAAD,EAASC,WAAT,EAAyB;AACtC,UAAI,CAACA,WAAD,IAAgBA,WAAW,KAAK,CAApC,EAAuC,OAAOD,MAAP;AACvC,aAAOA,MAAM,CAACE,MAAP,CAAc,UAAAN,IAAI;AAAA,eAAIA,IAAI,CAACO,WAAL,KAAqBF,WAAzB;AAAA,OAAlB,CAAP;AACD,K;;UACDG,U,GAAa,UAAAH,WAAW,EAAI;AAC1B,YAAKJ,QAAL,CAAc;AAAEI,QAAAA,WAAW,EAAXA;AAAF,OAAd;AACD,K;;;;;;;wCA7BmB;AAAA;;AAClB,UAAMI,MAAM,GAAG,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,EAAvC;AACAxB,MAAAA,aAAa,CAACoB,MAAD,CAAb,CAAsBK,IAAtB,CAA2B,UAAAC,UAAU,EAAI;AACvC,QAAA,MAAI,CAACd,QAAL,CAAc;AAAEc,UAAAA,UAAU,EAAVA;AAAF,SAAd;AACD,OAFD;AAGAC,MAAAA,OAAO,CAACC,GAAR,CAAY,CACV1B,yBAAyB,CAACkB,MAAD,CADf,EAEVnB,iBAAiB,CAACmB,MAAD,CAFP,CAAZ,EAGGK,IAHH,CAGQ,UAAAI,GAAG,EAAI;AACb,QAAA,MAAI,CAACjB,QAAL,CAAc;AACZkB,UAAAA,UAAU,EAAED,GAAG,CAAC,CAAD,CADH;AAEZd,UAAAA,MAAM,EAAEc,GAAG,CAAC,CAAD,CAFC;AAGZb,UAAAA,WAAW,EAAE;AAHD,SAAd;AAKD,OATD;AAUD;;;6BAgBQ;AAAA,wBAQH,KAAKT,KARF;AAAA,UAELmB,UAFK,eAELA,UAFK;AAAA,UAGLlB,QAHK,eAGLA,QAHK;AAAA,UAILC,UAJK,eAILA,UAJK;AAAA,UAKLM,MALK,eAKLA,MALK;AAAA,UAMLe,UANK,eAMLA,UANK;AAAA,UAOLd,WAPK,eAOLA,WAPK;AAUP,UAAMe,YAAY,GAAG,KAAKjB,YAAL,CAAkBC,MAAlB,EAA0BC,WAA1B,CAArB;AAEA,UAAMgB,QAAQ,GAAGD,YAAY,GAC3B,oBAAC,cAAD;AACE,QAAA,UAAU,EAAED,UADd;AAEE,QAAA,MAAM,EAAEC,YAFV;AAGE,QAAA,cAAc,EAAE,KAAKrB,cAHvB;AAIE,QAAA,UAAU,EAAE,KAAKS,UAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAD2B,GAQ3B,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF;AAUA,UAAMc,OAAO,GAAGP,UAAU,GACxB,oBAAC,cAAD;AACE,QAAA,IAAI,EAAE;AACJA,UAAAA,UAAU,EAAVA,UADI;AAEJlB,UAAAA,QAAQ,EAARA,QAFI;AAGJC,UAAAA,UAAU,EAAVA,UAHI;AAIJuB,UAAAA,QAAQ,EAARA,QAJI;AAKJnB,UAAAA,eAAe,EAAE,KAAKA,eALlB;AAMJH,UAAAA,cAAc,EAAE,KAAKA;AANjB,SADR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADwB,GAYxB,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZF;AAeA,aACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAQ,QAAA,QAAQ,EAAEP,QAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEG8B,OAFH,CADF;AAMD;;;;EA/E0BxC,S;;AAiF7B,eAAeE,UAAU,CAACW,cAAD,CAAzB","sourcesContent":["import React, { Component, Fragment } from \"react\";\r\nimport \"./restaurant-page.css\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport Spinner from \"components/spinner\";\r\nimport DishCategories from \"components-vitalii/dish-categories\";\r\nimport RestaurantView from \"./restaurant-view\";\r\nimport Header from \"components/shared-components/header\";\r\nimport {\r\n  getRestaurant,\r\n  getDishesByRestId,\r\n  getDishCategoriesByRestId\r\n} from \"api\";\r\n\r\nconst navItems = [\r\n  { label: \"Dishes\", link: \"/dishes\" },\r\n  { label: \"Restaurants\", link: \"/restaurants\" },\r\n  { label: \"Login\", link: \"/login\" },\r\n  { label: \"Registration\", link: \"/registration\" }\r\n];\r\n\r\nclass RestaurantPage extends Component {\r\n  state = {\r\n    openDish: false,\r\n    dishToShow: {}\r\n  };\r\n  componentDidMount() {\r\n    const restId = this.props.match.params.id;\r\n    getRestaurant(restId).then(restaurant => {\r\n      this.setState({ restaurant });\r\n    });\r\n    Promise.all([\r\n      getDishCategoriesByRestId(restId),\r\n      getDishesByRestId(restId)\r\n    ]).then(res => {\r\n      this.setState({\r\n        categories: res[0],\r\n        dishes: res[1],\r\n        category_id: \"\"\r\n      });\r\n    });\r\n  }\r\n  onDishAddClick = dish => {\r\n    this.setState({ dishToShow: dish });\r\n    this.setState({ openDish: true });\r\n  };\r\n  handleDishClose = () => {\r\n    this.setState({ openDish: false });\r\n  };\r\n  filterDishes = (dishes, category_id) => {\r\n    if (!category_id || category_id === 0) return dishes;\r\n    return dishes.filter(dish => dish.Category_id === category_id);\r\n  };\r\n  handleMenu = category_id => {\r\n    this.setState({ category_id });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      restaurant,\r\n      openDish,\r\n      dishToShow,\r\n      dishes,\r\n      categories,\r\n      category_id\r\n    } = this.state;\r\n\r\n    const dishesToShow = this.filterDishes(dishes, category_id);\r\n\r\n    const MenuView = dishesToShow ? (\r\n      <DishCategories\r\n        categories={categories}\r\n        dishes={dishesToShow}\r\n        onDishAddClick={this.onDishAddClick}\r\n        handleMenu={this.handleMenu}\r\n      />\r\n    ) : (\r\n      <Spinner />\r\n    );\r\n    const content = restaurant ? (\r\n      <RestaurantView\r\n        data={{\r\n          restaurant,\r\n          openDish,\r\n          dishToShow,\r\n          MenuView,\r\n          handleDishClose: this.handleDishClose,\r\n          onDishAddClick: this.onDishAddClick\r\n        }}\r\n      />\r\n    ) : (\r\n      <Spinner />\r\n    );\r\n\r\n    return (\r\n      <Fragment>\r\n        <Header navItems={navItems} />\r\n        {content}\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(RestaurantPage);\r\n"]},"metadata":{},"sourceType":"module"}