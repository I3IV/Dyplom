{"ast":null,"code":"import _objectSpread from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\src\\\\node_modules\\\\components\\\\pages\\\\restaurants-page\\\\index.js\";\nimport React, { Fragment, Component } from \"react\";\nimport Header from \"shared-components/header\";\nimport GridList from \"shared-components/grid-list\";\nimport SearchPanel from \"shared-components/search-panel\";\nimport RestaurantFilter from \"./restaurant-filter\";\nimport RestListItem from \"./grid-list-item-restaurant\";\nimport Spinner from \"shared-components/spinner\";\nimport \"./restaurant-page.css\";\nimport { getAllRestaurants } from \"api\";\n\nvar RestaurantPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RestaurantPage, _Component);\n\n  function RestaurantPage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, RestaurantPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(RestaurantPage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      selectedDay: new Date().getDay(),\n      term: \"\",\n      filter: {\n        noFilter: false,\n        country: \"\",\n        city: \"\",\n        seats: \"\",\n        cuisine: \"\"\n      }\n    };\n\n    _this.onSearchChange = function (term) {\n      _this.setState({\n        term: term\n      });\n    };\n\n    _this.onFilterChange = function (filter) {\n      _this.setState({\n        filter: filter\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(RestaurantPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      getAllRestaurants().then(function (restaurants) {\n        _this2.setState({\n          restaurants: _this2.setSchedule(restaurants, _this2.state.selectedDay)\n        });\n      });\n    }\n  }, {\n    key: \"search\",\n    value: function search(restaurants, term) {\n      if (term.length === 0) {\n        return restaurants;\n      }\n\n      return restaurants.filter(function (r) {\n        return r.RestaurantName.toLowerCase().indexOf(term.toLowerCase()) > -1;\n      });\n    }\n  }, {\n    key: \"setSchedule\",\n    value: function setSchedule(_restaurants, _day) {\n      return _restaurants.map(function (r) {\n        var schedule = r.schedule,\n            restProps = _objectWithoutProperties(r, [\"schedule\"]);\n\n        var idx = schedule.findIndex(function (ds) {\n          return ds.Day === _day;\n        });\n        return _objectSpread({}, restProps, {\n          schedule: schedule[idx]\n        });\n      });\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(restaurants, _filter) {\n      if (_filter.noFilter) return restaurants;\n      var filtered = restaurants;\n\n      if (_filter.country.length !== 0) {\n        filtered = filtered.filter(function (r) {\n          return r.country === _filter.country;\n        });\n      }\n\n      if (_filter.city.length !== 0) {\n        filtered = filtered.filter(function (r) {\n          return r.city === _filter.city;\n        });\n      }\n\n      if (_filter.seats.length !== 0) {\n        filtered = filtered.filter(function (r) {\n          return r.seats >= _filter.seats;\n        });\n      }\n\n      if (_filter.cuisine.length !== 0) {\n        filtered = filtered.filter(function (r) {\n          return r.cuisine === _filter.cuisine;\n        });\n      }\n\n      return filtered;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          restaurants = _this$state.restaurants,\n          filter = _this$state.filter,\n          term = _this$state.term;\n      var visibleItems = this.search(restaurants, term);\n      var content = !restaurants ? React.createElement(Spinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }) : visibleItems && visibleItems.length ? React.createElement(GridList, {\n        data: visibleItems,\n        GridListItem: RestListItem,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }) : React.createElement(\"span\", {\n        className: \"message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"No results that match your search\");\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"rest-page-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"filter-bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search-bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(SearchPanel, {\n        onSearchChange: this.onSearchChange,\n        placeholder: \"Search restaurants\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      })), React.createElement(RestaurantFilter, {\n        onFilterChange: this.onFilterChange,\n        filter: this.state.filter,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }))), content);\n    }\n  }]);\n\n  return RestaurantPage;\n}(Component);\n\nexport { RestaurantPage as default };","map":{"version":3,"sources":["D:\\Studia\\React\\I3IV\\Dyplom\\src\\node_modules\\components\\pages\\restaurants-page\\index.js"],"names":["React","Fragment","Component","Header","GridList","SearchPanel","RestaurantFilter","RestListItem","Spinner","getAllRestaurants","RestaurantPage","state","selectedDay","Date","getDay","term","filter","noFilter","country","city","seats","cuisine","onSearchChange","setState","onFilterChange","then","restaurants","setSchedule","length","r","RestaurantName","toLowerCase","indexOf","_restaurants","_day","map","schedule","restProps","idx","findIndex","ds","Day","filtered","visibleItems","search","content"],"mappings":"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","sourcesContent":["import React, { Fragment, Component } from \"react\";\n\nimport Header from \"shared-components/header\";\nimport GridList from \"shared-components/grid-list\";\nimport SearchPanel from \"shared-components/search-panel\";\nimport RestaurantFilter from \"./restaurant-filter\";\nimport RestListItem from \"./grid-list-item-restaurant\";\nimport Spinner from \"shared-components/spinner\";\nimport \"./restaurant-page.css\";\nimport { getAllRestaurants } from \"api\";\n\nexport default class RestaurantPage extends Component {\n  state = {\n    selectedDay: new Date().getDay(),\n    term: \"\",\n    filter: {\n      noFilter: false,\n      country: \"\",\n      city: \"\",\n      seats: \"\",\n      cuisine: \"\"\n    }\n  };\n  componentDidMount() {\n    getAllRestaurants().then(restaurants => {\n      this.setState({\n        restaurants: this.setSchedule(restaurants, this.state.selectedDay)\n      });\n    });\n  }\n  onSearchChange = term => {\n    this.setState({ term });\n  };\n  onFilterChange = filter => {\n    this.setState({ filter });\n  };\n  search(restaurants, term) {\n    if (term.length === 0) {\n      return restaurants;\n    }\n    return restaurants.filter(r => {\n      return r.RestaurantName.toLowerCase().indexOf(term.toLowerCase()) > -1;\n    });\n  }\n\n  setSchedule(_restaurants, _day) {\n    return _restaurants.map(r => {\n      const { schedule, ...restProps } = r;\n      const idx = schedule.findIndex(ds => ds.Day === _day);\n      return {\n        ...restProps,\n        schedule: schedule[idx]\n      };\n    });\n  }\n\n  filter(restaurants, filter) {\n    if (filter.noFilter) return restaurants;\n\n    let filtered = restaurants;\n\n    if (filter.country.length !== 0) {\n      filtered = filtered.filter(r => r.country === filter.country);\n    }\n    if (filter.city.length !== 0) {\n      filtered = filtered.filter(r => r.city === filter.city);\n    }\n    if (filter.seats.length !== 0) {\n      filtered = filtered.filter(r => r.seats >= filter.seats);\n    }\n    if (filter.cuisine.length !== 0) {\n      filtered = filtered.filter(r => r.cuisine === filter.cuisine);\n    }\n    return filtered;\n  }\n\n  render() {\n    const { restaurants, filter, term } = this.state;\n    const visibleItems = this.search(restaurants, term);\n\n    const content = !restaurants ? (\n      <Spinner />\n    ) : visibleItems && visibleItems.length ? (\n      <GridList data={visibleItems} GridListItem={RestListItem} />\n    ) : (\n      <span className=\"message\">No results that match your search</span>\n    );\n\n    return (\n      <Fragment>\n        <Header />\n        <div className=\"rest-page-content\">\n          <div className=\"filter-bar\">\n            <div className=\"search-bar\">\n              <SearchPanel\n                onSearchChange={this.onSearchChange}\n                placeholder=\"Search restaurants\"\n              />\n            </div>\n            <RestaurantFilter\n              onFilterChange={this.onFilterChange}\n              filter={this.state.filter}\n            />\n          </div>\n        </div>\n        {content}\n      </Fragment>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}