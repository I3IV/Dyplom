{"ast":null,"code":"import _objectSpread from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\Studia\\\\React\\\\I3IV\\\\Dyplom\\\\src\\\\node_modules\\\\components\\\\pages\\\\restaurants-page\\\\index.js\";\nimport React, { Fragment, Component } from \"react\";\nimport Header from \"components/shared-components/header\";\nimport GridList from \"components/grid-list\";\nimport SearchPanel from \"components/search-panel\";\nimport RestaurantFilter from \"components/restaurant-filter\";\nimport RestListItem from \"components/grid-list-item-restaurant\";\nimport Spinner from \"components/spinner\";\nimport \"./restaurant-page.css\";\nimport { getAllRestaurants } from \"api\";\nvar navItems = [{\n  label: \"Dishes\",\n  link: \"dishes\"\n}, {\n  label: \"Login\",\n  link: \"login\"\n}, {\n  label: \"Registration\",\n  link: \"registration\"\n}];\n\nvar RestaurantPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RestaurantPage, _Component);\n\n  function RestaurantPage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, RestaurantPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(RestaurantPage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      selectedDay: new Date().getDay(),\n      term: \"\",\n      filter: {\n        noFilter: false,\n        country: \"\",\n        city: \"\",\n        seats: \"\",\n        cuisine: \"\"\n      }\n    };\n\n    _this.onSearchChange = function (term) {\n      _this.setState({\n        term: term\n      });\n    };\n\n    _this.onFilterChange = function (filter) {\n      _this.setState({\n        filter: filter\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(RestaurantPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      getAllRestaurants().then(function (restaurants) {\n        _this2.setState({\n          restaurants: _this2.setSchedule(restaurants, _this2.state.selectedDay)\n        });\n      });\n    }\n  }, {\n    key: \"search\",\n    value: function search(restaurants, term) {\n      if (term.length === 0) {\n        return restaurants;\n      }\n\n      return restaurants.filter(function (r) {\n        return r.RestaurantName.toLowerCase().indexOf(term.toLowerCase()) > -1;\n      });\n    }\n  }, {\n    key: \"setSchedule\",\n    value: function setSchedule(_restaurants, _day) {\n      return _restaurants.map(function (r) {\n        var schedule = r.schedule,\n            restProps = _objectWithoutProperties(r, [\"schedule\"]);\n\n        var idx = schedule.findIndex(function (ds) {\n          return ds.Day === _day;\n        });\n        return _objectSpread({}, restProps, {\n          schedule: schedule[idx]\n        });\n      });\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(restaurants, _filter) {\n      if (_filter.noFilter) return restaurants;\n      var filtered = restaurants;\n\n      if (_filter.country.length !== 0) {\n        filtered = filtered.filter(function (r) {\n          return r.country === _filter.country;\n        });\n      }\n\n      if (_filter.city.length !== 0) {\n        filtered = filtered.filter(function (r) {\n          return r.city === _filter.city;\n        });\n      }\n\n      if (_filter.seats.length !== 0) {\n        filtered = filtered.filter(function (r) {\n          return r.seats >= _filter.seats;\n        });\n      }\n\n      if (_filter.cuisine.length !== 0) {\n        filtered = filtered.filter(function (r) {\n          return r.cuisine === _filter.cuisine;\n        });\n      }\n\n      return filtered;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          restaurants = _this$state.restaurants,\n          filter = _this$state.filter,\n          term = _this$state.term;\n      var visibleItems = this.search(restaurants, term);\n      var content = !restaurants ? React.createElement(Spinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }) : visibleItems && visibleItems.length ? React.createElement(GridList, {\n        data: visibleItems,\n        GridListItem: RestListItem,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }) : React.createElement(\"span\", {\n        className: \"message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"No results that match your search\");\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(Header, {\n        navItems: navItems,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"rest-page-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"filter-bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search-bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(SearchPanel, {\n        onSearchChange: this.onSearchChange,\n        placeholder: \"Search restaurants\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      })), React.createElement(RestaurantFilter, {\n        onFilterChange: this.onFilterChange,\n        filter: this.state.filter,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }))), content);\n    }\n  }]);\n\n  return RestaurantPage;\n}(Component);\n\nexport { RestaurantPage as default };","map":{"version":3,"sources":["D:\\Studia\\React\\I3IV\\Dyplom\\src\\node_modules\\components\\pages\\restaurants-page\\index.js"],"names":["React","Fragment","Component","Header","GridList","SearchPanel","RestaurantFilter","RestListItem","Spinner","getAllRestaurants","navItems","label","link","RestaurantPage","state","selectedDay","Date","getDay","term","filter","noFilter","country","city","seats","cuisine","onSearchChange","setState","onFilterChange","then","restaurants","setSchedule","length","r","RestaurantName","toLowerCase","indexOf","_restaurants","_day","map","schedule","restProps","idx","findIndex","ds","Day","filtered","visibleItems","search","content"],"mappings":"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","sourcesContent":["import React, { Fragment, Component } from \"react\";\r\n\r\nimport Header from \"components/shared-components/header\";\r\nimport GridList from \"components/grid-list\";\r\nimport SearchPanel from \"components/search-panel\";\r\nimport RestaurantFilter from \"components/restaurant-filter\";\r\nimport RestListItem from \"components/grid-list-item-restaurant\";\r\nimport Spinner from \"components/spinner\";\r\nimport \"./restaurant-page.css\";\r\n\r\nimport { getAllRestaurants } from \"api\";\r\n\r\nconst navItems = [\r\n  { label: \"Dishes\", link: \"dishes\" },\r\n  { label: \"Login\", link: \"login\" },\r\n  { label: \"Registration\", link: \"registration\" }\r\n];\r\n\r\nexport default class RestaurantPage extends Component {\r\n  state = {\r\n    selectedDay: new Date().getDay(),\r\n    term: \"\",\r\n    filter: {\r\n      noFilter: false,\r\n      country: \"\",\r\n      city: \"\",\r\n      seats: \"\",\r\n      cuisine: \"\"\r\n    }\r\n  };\r\n  componentDidMount() {\r\n    getAllRestaurants().then(restaurants => {\r\n      this.setState({\r\n        restaurants: this.setSchedule(restaurants, this.state.selectedDay)\r\n      });\r\n    });\r\n  }\r\n  onSearchChange = term => {\r\n    this.setState({ term });\r\n  };\r\n  onFilterChange = filter => {\r\n    this.setState({ filter });\r\n  };\r\n  search(restaurants, term) {\r\n    if (term.length === 0) {\r\n      return restaurants;\r\n    }\r\n    return restaurants.filter(r => {\r\n      return r.RestaurantName.toLowerCase().indexOf(term.toLowerCase()) > -1;\r\n    });\r\n  }\r\n\r\n  setSchedule(_restaurants, _day) {\r\n    return _restaurants.map(r => {\r\n      const { schedule, ...restProps } = r;\r\n      const idx = schedule.findIndex(ds => ds.Day === _day);\r\n      return {\r\n        ...restProps,\r\n        schedule: schedule[idx]\r\n      };\r\n    });\r\n  }\r\n\r\n  filter(restaurants, filter) {\r\n    if (filter.noFilter) return restaurants;\r\n\r\n    let filtered = restaurants;\r\n\r\n    if (filter.country.length !== 0) {\r\n      filtered = filtered.filter(r => r.country === filter.country);\r\n    }\r\n    if (filter.city.length !== 0) {\r\n      filtered = filtered.filter(r => r.city === filter.city);\r\n    }\r\n    if (filter.seats.length !== 0) {\r\n      filtered = filtered.filter(r => r.seats >= filter.seats);\r\n    }\r\n    if (filter.cuisine.length !== 0) {\r\n      filtered = filtered.filter(r => r.cuisine === filter.cuisine);\r\n    }\r\n    return filtered;\r\n  }\r\n\r\n  render() {\r\n    const { restaurants, filter, term } = this.state;\r\n    const visibleItems = this.search(restaurants, term);\r\n\r\n    const content = !restaurants ? (\r\n      <Spinner />\r\n    ) : visibleItems && visibleItems.length ? (\r\n      <GridList data={visibleItems} GridListItem={RestListItem} />\r\n    ) : (\r\n      <span className=\"message\">No results that match your search</span>\r\n    );\r\n\r\n    return (\r\n      <Fragment>\r\n        <Header navItems={navItems} />\r\n        <div className=\"rest-page-content\">\r\n          <div className=\"filter-bar\">\r\n            <div className=\"search-bar\">\r\n              <SearchPanel\r\n                onSearchChange={this.onSearchChange}\r\n                placeholder=\"Search restaurants\"\r\n              />\r\n            </div>\r\n            <RestaurantFilter\r\n              onFilterChange={this.onFilterChange}\r\n              filter={this.state.filter}\r\n            />\r\n          </div>\r\n        </div>\r\n        {content}\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}