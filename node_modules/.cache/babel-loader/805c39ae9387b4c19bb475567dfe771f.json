{"ast":null,"code":"import _toConsumableArray from \"H:\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"H:\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"H:\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"H:\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"H:\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"H:\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"H:\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"H:\\\\I3IV\\\\Dyplom\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"H:\\\\I3IV\\\\Dyplom\\\\src\\\\node_modules\\\\components\\\\pages\\\\dish-page\\\\dish-side-page\\\\dish-side-page.js\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles, MuiThemeProvider } from \"@material-ui/core/styles\";\nimport Divider from \"@material-ui/core/Divider\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport RemoveIcon from \"@material-ui/icons/Remove\";\nimport RadioSelect from \"shared-components/radio-select\";\nimport ProductsList from \"shared-components/products-list\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Typography from \"@material-ui/core/Typography\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Button from \"@material-ui/core/Button\";\nimport { addDishToCart, productsSelectItems } from \"api\";\nimport styles from \"./styles\";\nimport theme, { defaultTheme } from \"./themes\";\nimport { DISH_PHOTOS_URL } from \"shared-components/constants\";\nvar formatter = new Intl.NumberFormat(\"en-US\", {\n  style: \"currency\",\n  currency: \"USD\",\n  minimumFractionDigits: 2\n});\n\nvar DishSidePage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(DishSidePage, _React$Component);\n\n  function DishSidePage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, DishSidePage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DishSidePage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      products: [],\n      count: 1\n    };\n\n    _this.handleApply = function () {\n      var _this$state = _this.state,\n          dish = _this$state.dish,\n          count = _this$state.count,\n          sizes = _this$state.sizes,\n          size_id = _this$state.size_id;\n      addDishToCart(_objectSpread({}, dish, {\n        name: dish.Name,\n        count: count,\n        sizes: sizes,\n        size_id: size_id,\n        RestaurantDish_id: dish.id\n      }));\n\n      _this.props.handleApply();\n    };\n\n    _this.onDishSizeChange = function (size_id) {\n      _this.setState({\n        size_id: size_id\n      });\n    };\n\n    _this.onProductChange = function (product_id) {\n      var products = _this.state.products;\n\n      var changedProducts = _this.toggleProperty(products, product_id, \"checked\");\n\n      _this.setState({\n        products: changedProducts\n      });\n    };\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value));\n      };\n    };\n\n    _this.onDishUp = function () {\n      _this.setState({\n        count: _this.state.count + 1\n      });\n    };\n\n    _this.onDishDown = function () {\n      if (_this.state.count - 1 >= 1) {\n        _this.setState({\n          count: _this.state.count - 1\n        });\n      }\n    };\n\n    _this.transformDishSizes = function (_sizes) {\n      return _sizes.map(function (size) {\n        return {\n          id: size.id,\n          name: size.DishSizeName,\n          price: size.price,\n          DishInMenuId: size.DishInMenuId\n        };\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(DishSidePage, [{\n    key: \"toggleProperty\",\n    value: function toggleProperty(arr, id, propName) {\n      var idx = arr.findIndex(function (el) {\n        return el.value === id;\n      });\n      var oldItem = arr[idx];\n\n      var newItem = _objectSpread({}, oldItem, _defineProperty({}, propName, !oldItem[propName]));\n\n      return _toConsumableArray(arr.slice(0, idx)).concat([newItem], _toConsumableArray(arr.slice(idx + 1)));\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.dishToShow.id !== this.state.id) {\n        var _nextProps$dishToShow = nextProps.dishToShow,\n            Sizes = _nextProps$dishToShow.Sizes,\n            id = _nextProps$dishToShow.id;\n        this.setState({\n          dish: nextProps.dishToShow,\n          size_id: Sizes[0].id,\n          sizes: this.transformDishSizes(Sizes),\n          products: productsSelectItems(id).map(function (product) {\n            return _objectSpread({}, product, {\n              checked: true\n            });\n          })\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var classes = this.props.classes;\n      var _this$state2 = this.state,\n          count = _this$state2.count,\n          sizes = _this$state2.sizes,\n          size_id = _this$state2.size_id,\n          products = _this$state2.products,\n          dish = _this$state2.dish;\n      if (!dish) return \"\";\n      var id = dish.id,\n          Name = dish.Name,\n          Description = dish.Description;\n      var Price = sizes.find(function (size) {\n        return size.id == size_id;\n      }).price;\n      return React.createElement(\"div\", {\n        className: classes.list,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(MuiThemeProvider, {\n        theme: theme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.content,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"\".concat(DISH_PHOTOS_URL + dish.defaultPhoto),\n        alt: Name,\n        className: classes.dishImg,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: classes.topDesc,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"h6\",\n        color: \"primary\",\n        gutterBottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, Name), React.createElement(Typography, {\n        variant: \"body2\",\n        color: \"secondary\",\n        gutterBottom: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, Description)), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(MuiThemeProvider, {\n        theme: defaultTheme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        className: classes.text,\n        variant: \"h6\",\n        color: \"textSecondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"Select size\"), size_id && React.createElement(RadioSelect, {\n        items: sizes,\n        selected: size_id,\n        onChange: this.onDishSizeChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), React.createElement(Typography, {\n        className: classes.text,\n        variant: \"h6\",\n        color: \"textSecondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"Select products\"), products && React.createElement(ProductsList, {\n        items: products,\n        onProductChange: this.onProductChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }), React.createElement(Typography, {\n        className: classes.text,\n        variant: \"h6\",\n        color: \"textSecondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Comment\")), React.createElement(TextField, {\n        id: \"filled-textarea\",\n        placeholder: \"Enter your comment\",\n        multiline: true,\n        rows: \"4\",\n        className: classes.textField,\n        margin: \"normal\",\n        variant: \"filled\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: classes.bottomPanel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.flexRow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"\".concat(classes.flexRow, \" \").concat(classes.flexPrice),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        className: classes.iconButton,\n        \"aria-label\": \"Remove\",\n        onClick: this.onDishDown,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(RemoveIcon, {\n        fontSize: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      })), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, count), React.createElement(IconButton, {\n        className: classes.iconButton,\n        \"aria-label\": \"Add\",\n        onClick: this.onDishUp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(AddIcon, {\n        fontSize: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }))), React.createElement(Typography, {\n        className: classes.price,\n        variant: \"h6\",\n        color: \"textPrimary\",\n        align: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, formatter.format(count * Price))), React.createElement(MuiThemeProvider, {\n        theme: defaultTheme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.handleApply,\n        color: \"secondary\",\n        variant: \"outlined\",\n        className: classes.button,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, \"Add to cart\")))));\n    }\n  }]);\n\n  return DishSidePage;\n}(React.Component);\n\nDishSidePage.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(DishSidePage);","map":{"version":3,"sources":["H:\\I3IV\\Dyplom\\src\\node_modules\\components\\pages\\dish-page\\dish-side-page\\dish-side-page.js"],"names":["React","PropTypes","withStyles","MuiThemeProvider","Divider","AddIcon","RemoveIcon","RadioSelect","ProductsList","TextField","Typography","IconButton","Button","addDishToCart","productsSelectItems","styles","theme","defaultTheme","DISH_PHOTOS_URL","formatter","Intl","NumberFormat","style","currency","minimumFractionDigits","DishSidePage","state","products","count","handleApply","dish","sizes","size_id","name","Name","RestaurantDish_id","id","props","onDishSizeChange","setState","onProductChange","product_id","changedProducts","toggleProperty","handleChange","event","target","value","onDishUp","onDishDown","transformDishSizes","_sizes","map","size","DishSizeName","price","DishInMenuId","arr","propName","idx","findIndex","el","oldItem","newItem","slice","nextProps","dishToShow","Sizes","product","checked","classes","Description","Price","find","list","content","defaultPhoto","dishImg","topDesc","text","textField","bottomPanel","flexRow","flexPrice","iconButton","format","button","Component","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { withStyles, MuiThemeProvider } from \"@material-ui/core/styles\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport RemoveIcon from \"@material-ui/icons/Remove\";\r\nimport RadioSelect from \"shared-components/radio-select\";\r\nimport ProductsList from \"shared-components/products-list\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { addDishToCart, productsSelectItems } from \"api\";\r\nimport styles from \"./styles\";\r\nimport theme, { defaultTheme } from \"./themes\";\r\nimport { DISH_PHOTOS_URL } from \"shared-components/constants\";\r\nconst formatter = new Intl.NumberFormat(\"en-US\", {\r\n  style: \"currency\",\r\n  currency: \"USD\",\r\n  minimumFractionDigits: 2\r\n});\r\nclass DishSidePage extends React.Component {\r\n  state = {\r\n    products: [],\r\n    count: 1\r\n  };\r\n  handleApply = () => {\r\n    const { dish, count, sizes, size_id } = this.state;\r\n    addDishToCart({\r\n      ...dish,\r\n      name: dish.Name,\r\n      count,\r\n      sizes,\r\n      size_id,\r\n      RestaurantDish_id: dish.id\r\n    });\r\n    this.props.handleApply();\r\n  };\r\n  toggleProperty(arr, id, propName) {\r\n    const idx = arr.findIndex(el => el.value === id);\r\n    const oldItem = arr[idx];\r\n    const newItem = { ...oldItem, [propName]: !oldItem[propName] };\r\n\r\n    return [...arr.slice(0, idx), newItem, ...arr.slice(idx + 1)];\r\n  }\r\n  onDishSizeChange = size_id => {\r\n    this.setState({\r\n      size_id\r\n    });\r\n  };\r\n  onProductChange = product_id => {\r\n    const { products } = this.state;\r\n    const changedProducts = this.toggleProperty(\r\n      products,\r\n      product_id,\r\n      \"checked\"\r\n    );\r\n    this.setState({\r\n      products: changedProducts\r\n    });\r\n  };\r\n  handleChange = name => event => {\r\n    this.setState({\r\n      [name]: event.target.value\r\n    });\r\n  };\r\n  onDishUp = () => {\r\n    this.setState({\r\n      count: this.state.count + 1\r\n    });\r\n  };\r\n  onDishDown = () => {\r\n    if (this.state.count - 1 >= 1) {\r\n      this.setState({\r\n        count: this.state.count - 1\r\n      });\r\n    }\r\n  };\r\n  transformDishSizes = _sizes => {\r\n    return _sizes.map(size => ({\r\n      id: size.id,\r\n      name: size.DishSizeName,\r\n      price: size.price,\r\n      DishInMenuId: size.DishInMenuId\r\n    }));\r\n  };\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.dishToShow.id !== this.state.id) {\r\n      const { Sizes, id } = nextProps.dishToShow;\r\n      this.setState({\r\n        dish: nextProps.dishToShow,\r\n        size_id: Sizes[0].id,\r\n        sizes: this.transformDishSizes(Sizes),\r\n        products: productsSelectItems(id).map(product => ({\r\n          ...product,\r\n          checked: true\r\n        }))\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { count, sizes, size_id, products, dish } = this.state;\r\n    if (!dish) return \"\";\r\n    const { id, Name, Description } = dish;\r\n    const Price = sizes.find(size => size.id == size_id).price;\r\n    return (\r\n      <div className={classes.list}>\r\n        <MuiThemeProvider theme={theme}>\r\n          <div className={classes.content}>\r\n            <img\r\n              src={`${DISH_PHOTOS_URL + dish.defaultPhoto}`}\r\n              alt={Name}\r\n              className={classes.dishImg}\r\n            />\r\n\r\n            <div className={classes.topDesc}>\r\n              <Typography variant=\"h6\" color=\"primary\" gutterBottom>\r\n                {Name}\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"secondary\" gutterBottom>\r\n                {Description}\r\n              </Typography>\r\n            </div>\r\n            <Divider />\r\n            <MuiThemeProvider theme={defaultTheme}>\r\n              <Typography\r\n                className={classes.text}\r\n                variant=\"h6\"\r\n                color=\"textSecondary\"\r\n              >\r\n                Select size\r\n              </Typography>\r\n              {size_id && (\r\n                <RadioSelect\r\n                  items={sizes}\r\n                  selected={size_id}\r\n                  onChange={this.onDishSizeChange}\r\n                />\r\n              )}\r\n              <Divider />\r\n              <Typography\r\n                className={classes.text}\r\n                variant=\"h6\"\r\n                color=\"textSecondary\"\r\n              >\r\n                Select products\r\n              </Typography>\r\n              {products && (\r\n                <ProductsList\r\n                  items={products}\r\n                  onProductChange={this.onProductChange}\r\n                />\r\n              )}\r\n              <Divider />\r\n              <Typography\r\n                className={classes.text}\r\n                variant=\"h6\"\r\n                color=\"textSecondary\"\r\n              >\r\n                Comment\r\n              </Typography>\r\n            </MuiThemeProvider>\r\n            <TextField\r\n              id=\"filled-textarea\"\r\n              placeholder=\"Enter your comment\"\r\n              multiline\r\n              rows=\"4\"\r\n              className={classes.textField}\r\n              margin=\"normal\"\r\n              variant=\"filled\"\r\n            />\r\n            <Divider />\r\n          </div>\r\n          <div className={classes.bottomPanel}>\r\n            <div className={classes.flexRow}>\r\n              <div className={`${classes.flexRow} ${classes.flexPrice}`}>\r\n                <IconButton\r\n                  className={classes.iconButton}\r\n                  aria-label=\"Remove\"\r\n                  onClick={this.onDishDown}\r\n                >\r\n                  <RemoveIcon fontSize=\"small\" />\r\n                </IconButton>\r\n                <span>{count}</span>\r\n                <IconButton\r\n                  className={classes.iconButton}\r\n                  aria-label=\"Add\"\r\n                  onClick={this.onDishUp}\r\n                >\r\n                  <AddIcon fontSize=\"small\" />\r\n                </IconButton>\r\n              </div>\r\n              <Typography\r\n                className={classes.price}\r\n                variant=\"h6\"\r\n                color=\"textPrimary\"\r\n                align=\"center\"\r\n              >\r\n                {formatter.format(count * Price)}\r\n              </Typography>\r\n            </div>\r\n            <MuiThemeProvider theme={defaultTheme}>\r\n              <Button\r\n                onClick={this.handleApply}\r\n                color=\"secondary\"\r\n                variant=\"outlined\"\r\n                className={classes.button}\r\n              >\r\n                Add to cart\r\n              </Button>\r\n            </MuiThemeProvider>\r\n          </div>\r\n        </MuiThemeProvider>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nDishSidePage.propTypes = {\r\n  classes: PropTypes.object.isRequired\r\n};\r\n\r\nexport default withStyles(styles)(DishSidePage);\r\n"]},"metadata":{},"sourceType":"module"}